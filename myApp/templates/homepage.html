<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% load static %}
    <link rel='stylesheet' href="{% static 'style.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Homepage</title>
</head>
<body>
    <div class="app-name">
        <h2><i class="fa fa-camera-retro"></i> IMAGE SHARE <i class="fa fa-share-alt"></i></h2>
    </div>

    <div class="container">
        {% if registered %}
        <a href="#"><i class="fa fa-user-circle"></i> {{user}}</a>
        <a href="/dashboard/"><i class="fa fa-address-card-o"></i> PROFILE</a>
        <a href="/logout/"><i class="fa fa-sign-out"></i> LOG OUT</a>
        {% else %}
        <a href="/signup/"><i class="fa fa-user-plus"></i> JOIN US</a>
        <a href="/login/"><i class="fa fa-sign-in"></i> LOG IN</a>
        {% endif %}
    </div>

    <div class="search-bar">
        <form action="/manualsearch/" method="post">
            {% csrf_token %}
            <input type="text" placeholder="Search here by catagory name.." name="searchbar">
            <input type="submit" value="SEARCH">
        </form>
    </div>
    <br>


    <div class="grid-container">
        <div class="catagory-list">
            <div class="my-posts">
                <h2>Categories</h2><br>
            </div>
            <div class="cat-tiles">
                <button class="cat-items"><a href="{% url 'catgsearch' 'allimg' %}" class="">All images</a></button>
                {% for catg in category %}
                    <button class="cat-items"><a href="{% url 'catgsearch' catg %}" class="">{{catg}}</a></button>
                {% endfor %}
            </div>
        </div>
        <div class="tiles">
            <div class="my-posts">
                <h2>Click on the image to view full size</h2><br>
            </div>
            {% if select%}
                <div class="photo_comments">
                    <div class="frame">
                        <a href="{{selectedimg.photo.url}}">
                            <img src="{{selectedimg.photo.url}}" alt="Sorry! not found">
                        </a>
                    </div>
                    <div class="comment-section">
                        <a href="{% url 'onclick' selectedimg.user %}">
                        <div class="pic-name-email">
                            <div class="section1">
                                <h1 style="color:white;">{{profile.user|upper|make_list|first}}</h1>
                            </div>
                            <div class="section2">
                                <label><strong>{{selectedimg.user.username}}</strong></label><br>
                                <label><i>{{profile.email}}</i></label>
                            </div>
                        </div></a>
                        <br>
                        <p>
                            <label><i>Posted on <br>{{selectedimg.date}}</i></label>
                        </p>
                        <br>
                        <p>
                            <label><i>Image Category: {{selectedimg.catg}}</i></label>
                        </p>
                        <br>
                        <a href="{{selectedimg.photo.url}}" download="{{selectedimg.photo.url}}" ><button id="dwn">Download <i class="fa fa-download"></i></button></a>
                        {% if not visitor %}
                        <a href="{% url 'delete' selectedimg.id 'homepage'%}"><button id="del">Delete <i class="fa fa-trash"></i></button></a> 
                        {% endif %} 
                    </div>
                </div>
            <div class="my-posts">
                <h2>More images like this..</h2>
            </div><br>
            {% endif %}
            <div class="gallery">
                {% for image in images %}
                    <div class="repeat">   
                        <a href="{% url 'selectimg' image.catg image.id %}">
                            <img src="{{image.photo.url}}" alt=""><br>
                        </a>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div> 
    <br><br>
</body>
</html>